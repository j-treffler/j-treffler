<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>Verben Trainer</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="../assets/css/main.css"/>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Main -->
    <div id="main">
        <div class="inner">

            <!-- Content -->
            <section id="fileInput">
                <div class="col-12">
                    <p>Verben Liste auswählen:</p>
                    <input type="file" onchange="handleFiles(this.files)" accept=".csv">
                </div>
            </section>
            <section id="verb-trainer" style="display:none">
                <div>
                    <form action="#">
                        <div class="row gtr-uniform">
                            <div class="col-4 col-12-xsmall" id="languageOptionsDiv" style="display:none">
                                <select name="languageOptions" id="languageOptions" required>
                                    <option value="">- Sprache -</option>
                                    <option value="0">Spanisch</option>
                                    <option value="1">Italienisch</option>
                                    <option value="2">Portugiesisch</option>
                                </select>
                            </div>
                            <div class="col-4 col-12-xsmall" id="languageFieldDiv">
                                <p name="languageField" id="languageField">Sprache
                                <p/>
                            </div>
                            <div class="col-4 col-12-xsmall" id="personOptionsDiv" style="display:none">
                                <select name="languageOptions" id="personOptions" required>
                                    <option value="">- Person -</option>
                                    <option value="0">1. Pers. Sg.</option>
                                    <option value="1">2. Pers. Sg.</option>
                                    <option value="2">3. Pers. Sg.</option>
                                    <option value="3">1. Pers. Pl.</option>
                                    <option value="4">2. Pers. Pl.</option>
                                    <option value="5">3. Pers. Pl.</option>
                                </select>
                            </div>
                            <div class="col-4 col-12-xsmall" id="personFieldDiv">
                                <p name="personField" id="personField">Person
                                <p/>
                            </div>
                            <div class="col-4 col-12-xsmall">
                                <p name="verbField" id="verbField">Verb
                                <p/>
                            </div>
                            <!-- Break -->
                            <div class="col-12">
                                <button id="shuffleBtn" type="button" onclick="shuffle()">mischen</button>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
            <section id="options" style="display:none">
                <form action="#">
                    <div><h4>Optionen:</h4></div>
                    <div class="col gtr-uniform">
                        <div class="col-6 col-12-small">
                            <input type="checkbox" id="languageCbx" name="languageCbx"
                                   onchange="switchLanguageOptions()">
                            <label for="languageCbx">Sprache manuell wählen</label>
                        </div>
                        <div class="col-6 col-12-small">
                            <input type="checkbox" id="personCbx" name="personCbx" onchange="switchPersonOptions()">
                            <label for="personCbx">Person manuell wählen</label>
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </div>

</div>

<!-- Scripts -->
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/browser.min.js"></script>
<script src="../assets/js/breakpoints.min.js"></script>
<script src="../assets/js/util.js"></script>
<script src="../assets/js/main.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

    var verbs = [];

    function shuffle(){
        shuffleLanguages()
        shufflePersons();
        shuffleVerbs();
    }

    function shuffleLanguages(){
        const languages = ["Spanisch","Italienisch","Portugiesisch"];
        document.getElementById("languageField").innerHTML = languages[Math.floor(Math.random() * languages.length)];
    }

    function shufflePersons(){
        const persons = ["1. Pers. Sg.","2. Pers. Sg.","3. Pers. Sg.","1. Pers. Pl.","2. Pers. Pl.","3. Pers. Pl."];
        document.getElementById("personField").innerHTML = persons[Math.floor(Math.random() * persons.length)];
    }

    function shuffleVerbs(){
        var verbId = Math.floor(Math.random() * verbs.length);
        document.getElementById("verbField").innerHTML = verbs[verbId];
    }

    function switchLanguageOptions(){
        var languageField = document.getElementById("languageFieldDiv");
        var languageOptions = document.getElementById("languageOptionsDiv");
        if(document.getElementById("languageCbx").checked){
            languageOptions.style.display = "block";
            languageField.style.display = "none";
        }else{
            languageOptions.style.display = "none";
            languageField.style.display = "block";
        }
    }

    function switchPersonOptions(){
        var personField = document.getElementById("personFieldDiv");
        var personOptions = document.getElementById("personOptionsDiv");
        if(document.getElementById("personCbx").checked){
            personOptions.style.display = "block";
            personField.style.display = "none";
        }else{
            personOptions.style.display = "none";
            personField.style.display = "block";
        }
    }

    function handleFiles(files) {
        getAsText(files[0])
        document.getElementById("fileInput").style.display = "none";
        document.getElementById("verb-trainer").style.display = "block";
        document.getElementById("options").style.display = "block";
    }

    function getAsText(fileToRead) {
        const reader = new FileReader()
        reader.readAsText(fileToRead)
        reader.onload = (event) => processData(event.target.result)
    }

    function processData(data) {
        var lines = data.split('\n');

        for (var i=0; i<lines.length; ++i) {
           verbs.push(lines[i]);
        }
    }


</script>
</body>
</html>